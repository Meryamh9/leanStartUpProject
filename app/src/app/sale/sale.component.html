<div class="sale-container">
  <h2>Créer une annonce</h2>

  <form [formGroup]="saleForm" (ngSubmit)="submitForm()">

    <!-- Étape 1 -->
    <div *ngIf="currentStep === 1">
      <label for="title">Titre de l'annonce</label>
      <input id="title" formControlName="title" type="text" placeholder="Ex: Grande table en bois 8 personnes" />

      <label for="category">Catégorie principale</label>
      <select id="category" formControlName="category" (change)="onCategoryChange()">
        <option value="">Sélectionnez une catégorie</option>
        <option *ngFor="let cat of mainCategories" [value]="cat.id">{{ cat.name }}</option>
      </select>

      <label for="subcategory">Sous-catégorie</label>
      <select id="subcategory" formControlName="subcategory">
        <option value="">Sélectionnez une sous-catégorie</option>
        <option *ngFor="let sub of filteredSubcategories" [value]="sub.id">{{ sub.name }}</option>
      </select>

      <label for="condition">État</label>
      <input id="condition" formControlName="condition" type="text" placeholder="Ex: Presque neuf" />

      <button type="button" (click)="nextStep()">Suivant</button>
    </div>

    <!-- Étape 2 -->
    <div *ngIf="currentStep === 2" class="slide-in-right">
      <label for="price">Prix (€)</label>
      <input id="price" formControlName="price" type="number" min="0" placeholder="Ex: 40" />

      <label for="description">Description</label>
      <textarea id="description" formControlName="description" placeholder="Décrivez votre article"></textarea>

      <button type="button" (click)="previousStep()">Précédent</button>
      <button type="submit" [disabled]="submitting">
        {{ submitting ? 'Envoi en cours...' : 'Publier l\'annonce' }}
      </button>
    </div>
  </form>
</div>
